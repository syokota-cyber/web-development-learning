<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ©Ÿèƒ½Reactå­¦ç¿’ã‚¢ãƒ—ãƒª - ãƒªã‚¹ãƒˆ&ãƒ•ã‚©ãƒ¼ãƒ </title>
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .app-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #007bff;
        }
        .error {
            color: #dc3545;
            font-size: 12px;
            margin-top: 4px;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        .btn:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
        }
        .todo-list {
            margin-top: 20px;
        }
        .todo-item {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .todo-item.completed {
            background: #f8f9fa;
            opacity: 0.7;
        }
        .todo-content {
            flex: 1;
        }
        .todo-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        .todo-meta {
            font-size: 12px;
            color: #6c757d;
        }
        .todo-actions {
            display: flex;
            gap: 5px;
        }
        .filters {
            margin: 20px 0;
            text-align: center;
        }
        .filter-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 2px;
            font-size: 12px;
        }
        .filter-btn.active {
            background: #007bff;
        }
        .stats {
            background: #e9ecef;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // é«˜æ©Ÿèƒ½Todo ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
        function TodoApp() {
            // Stateç®¡ç†
            const [todos, setTodos] = React.useState([
                { id: 1, title: "ReactåŸºç¤ã‚’å­¦ã¶", category: "å­¦ç¿’", priority: "high", completed: true, createdAt: new Date('2025-01-01') },
                { id: 2, title: "Props ã‚’ç†è§£ã™ã‚‹", category: "å­¦ç¿’", priority: "high", completed: true, createdAt: new Date('2025-01-02') },
                { id: 3, title: "State ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹", category: "å­¦ç¿’", priority: "medium", completed: true, createdAt: new Date('2025-01-03') },
                { id: 4, title: "ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹", category: "å­¦ç¿’", priority: "high", completed: false, createdAt: new Date() }
            ]);
            
            // ãƒ•ã‚©ãƒ¼ãƒ ç”¨State
            const [formData, setFormData] = React.useState({
                title: '',
                category: 'å­¦ç¿’',
                priority: 'medium'
            });
            
            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”¨State
            const [filter, setFilter] = React.useState('all');
            
            // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºç”¨State
            const [errors, setErrors] = React.useState({});
            
            // ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: value
                }));
                
                // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¯ãƒªã‚¢
                if (errors[name]) {
                    setErrors(prev => ({
                        ...prev,
                        [name]: ''
                    }));
                }
            };
            
            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const validateForm = () => {
                const newErrors = {};
                
                if (!formData.title.trim()) {
                    newErrors.title = 'ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™';
                } else if (formData.title.length < 3) {
                    newErrors.title = 'ã‚¿ã‚¤ãƒˆãƒ«ã¯3æ–‡å­—ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„';
                }
                
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };
            
            // Todoè¿½åŠ 
            const addTodo = (e) => {
                e.preventDefault();
                
                if (!validateForm()) return;
                
                const newTodo = {
                    id: Date.now(),
                    title: formData.title.trim(),
                    category: formData.category,
                    priority: formData.priority,
                    completed: false,
                    createdAt: new Date()
                };
                
                setTodos(prev => [...prev, newTodo]);
                setFormData({ title: '', category: 'å­¦ç¿’', priority: 'medium' });
            };
            
            // Todoå‰Šé™¤
            const deleteTodo = (id) => {
                setTodos(prev => prev.filter(todo => todo.id !== id));
            };
            
            // Todoå®Œäº†åˆ‡ã‚Šæ›¿ãˆ
            const toggleTodo = (id) => {
                setTodos(prev => prev.map(todo => 
                    todo.id === id ? { ...todo, completed: !todo.completed } : todo
                ));
            };
            
            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            const filteredTodos = todos.filter(todo => {
                switch (filter) {
                    case 'active': return !todo.completed;
                    case 'completed': return todo.completed;
                    default: return true;
                }
            });
            
            // çµ±è¨ˆæƒ…å ±
            const stats = {
                total: todos.length,
                completed: todos.filter(t => t.completed).length,
                active: todos.filter(t => !t.completed).length
            };
            
            // å„ªå…ˆåº¦ã®è‰²åˆ†ã‘
            const getPriorityColor = (priority) => {
                switch (priority) {
                    case 'high': return '#dc3545';
                    case 'medium': return '#ffc107';
                    case 'low': return '#28a745';
                    default: return '#6c757d';
                }
            };

            return (
                <div className="app-container">
                    <h1>ğŸ¯ Reactå­¦ç¿’é€²æ—ç®¡ç†ã‚¢ãƒ—ãƒª</h1>
                    
                    {/* çµ±è¨ˆæƒ…å ± */}
                    <div className="stats">
                        <strong>é€²æ—çŠ¶æ³:</strong> å…¨{stats.total}é …ç›® | 
                        å®Œäº† {stats.completed}é …ç›® | 
                        æ®‹ã‚Š {stats.active}é …ç›®
                    </div>
                    
                    {/* æ–°è¦Todoè¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  */}
                    <div className="form-section">
                        <h3>ğŸ“ æ–°ã—ã„å­¦ç¿’é …ç›®ã‚’è¿½åŠ </h3>
                        <form onSubmit={addTodo}>
                            <div className="form-group">
                                <label>å­¦ç¿’é …ç›®</label>
                                <input 
                                    type="text"
                                    name="title"
                                    value={formData.title}
                                    onChange={handleInputChange}
                                    placeholder="ä¾‹: useEffect ã‚’ç†è§£ã™ã‚‹"
                                />
                                {errors.title && <div className="error">{errors.title}</div>}
                            </div>
                            
                            <div className="form-group">
                                <label>ã‚«ãƒ†ã‚´ãƒª</label>
                                <select 
                                    name="category"
                                    value={formData.category}
                                    onChange={handleInputChange}
                                >
                                    <option value="å­¦ç¿’">å­¦ç¿’</option>
                                    <option value="å®Ÿè·µ">å®Ÿè·µ</option>
                                    <option value="å¾©ç¿’">å¾©ç¿’</option>
                                    <option value="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</option>
                                </select>
                            </div>
                            
                            <div className="form-group">
                                <label>å„ªå…ˆåº¦</label>
                                <select 
                                    name="priority"
                                    value={formData.priority}
                                    onChange={handleInputChange}
                                >
                                    <option value="low">ä½</option>
                                    <option value="medium">ä¸­</option>
                                    <option value="high">é«˜</option>
                                </select>
                            </div>
                            
                            <button type="submit" className="btn">ğŸ“‹ è¿½åŠ </button>
                        </form>
                    </div>
                    
                    {/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}
                    <div className="filters">
                        <button 
                            className={`filter-btn ${filter === 'all' ? 'active' : ''}`}
                            onClick={() => setFilter('all')}
                        >
                            ã™ã¹ã¦ ({stats.total})
                        </button>
                        <button 
                            className={`filter-btn ${filter === 'active' ? 'active' : ''}`}
                            onClick={() => setFilter('active')}
                        >
                            æœªå®Œäº† ({stats.active})
                        </button>
                        <button 
                            className={`filter-btn ${filter === 'completed' ? 'active' : ''}`}
                            onClick={() => setFilter('completed')}
                        >
                            å®Œäº†æ¸ˆã¿ ({stats.completed})
                        </button>
                    </div>
                    
                    {/* Todoãƒªã‚¹ãƒˆ */}
                    <div className="todo-list">
                        {filteredTodos.length === 0 ? (
                            <div style={{textAlign: 'center', padding: '40px', color: '#6c757d'}}>
                                {filter === 'all' ? 'å­¦ç¿’é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“' : 
                                 filter === 'active' ? 'æœªå®Œäº†ã®é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“' : 
                                 'å®Œäº†æ¸ˆã¿ã®é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“'}
                            </div>
                        ) : (
                            filteredTodos.map(todo => (
                                <div key={todo.id} className={`todo-item ${todo.completed ? 'completed' : ''}`}>
                                    <div className="todo-content">
                                        <div className="todo-title">
                                            <span style={{
                                                color: getPriorityColor(todo.priority),
                                                marginRight: '8px'
                                            }}>
                                                â—
                                            </span>
                                            {todo.title}
                                            {todo.completed && ' âœ…'}
                                        </div>
                                        <div className="todo-meta">
                                            {todo.category} | å„ªå…ˆåº¦: {todo.priority} | 
                                            ä½œæˆ: {todo.createdAt.toLocaleDateString()}
                                        </div>
                                    </div>
                                    <div className="todo-actions">
                                        <button 
                                            className="btn btn-small"
                                            onClick={() => toggleTodo(todo.id)}
                                        >
                                            {todo.completed ? 'æœªå®Œäº†' : 'å®Œäº†'}
                                        </button>
                                        <button 
                                            className="btn btn-danger btn-small"
                                            onClick={() => deleteTodo(todo.id)}
                                        >
                                            å‰Šé™¤
                                        </button>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        // ã‚¢ãƒ—ãƒªã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TodoApp />);
    </script>
</body>
</html>